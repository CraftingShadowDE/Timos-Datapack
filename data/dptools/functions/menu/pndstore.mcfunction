#Detect Moving
execute as @a[nbt={SelectedItem:{tag:{menu:1b}}}] at @s run function dptools:menu/move
#Detect Not-Holding
execute as @a[tag=pnd,nbt=!{SelectedItem:{tag:{menu:1b}}}] as @e[tag=pndmenu,limit=1,sort=nearest] at @s run tp @s ~ ~-100000000 ~
#Reseting Page if Moving
execute as @a[tag=pnd,tag=move] at @s as @e[tag=pndmenu,limit=1,sort=nearest] run scoreboard players set @s page 1
execute as @a[tag=pnd,tag=move] at @s as @e[tag=pndmenu,limit=1,sort=nearest] run function dptools:menu/pnddirectory
#Summoning Menu if just started holding menu tablet
execute at @a[tag=!pnd,nbt={SelectedItem:{tag:{menu:1b}}}] run summon chest_minecart ~ ~1.2 ~ {NoGravity: 1b, Motion: [0.0d, 0.0d, 0.0d], CustomDisplayTile: 1b, DisplayState: {Name: "minecraft:air"}, Silent: 1b, Invulnerable: 1b, Air: 0s, OnGround: 0b, PortalCooldown: 0, Rotation: [0.0f, 0.0f], FallDistance: 0.0f, DisplayOffset: 0, CustomName: '{"italic":false,"color":"white","text":"P.N.D Storage"}', Fire: -1s,Items: [{Slot: 0b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 2, display: {Name: '{"text":""}'}}}, {Slot: 1b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 2b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 3b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 4b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 5b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 6b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 7b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 8b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 9b, id: "minecraft:slime_block", Count: 1b, tag: {filler: 1b, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Bounce Mobs Up","color":"dark_green","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 10b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 11b, id: "minecraft:wither_skeleton_spawn_egg", Count: 1b, tag: {filler: 1b, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Summon Wither Skeleton 5 Blocks Away","color":"dark_red","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 12b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 13b, id: "minecraft:honey_bottle", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Potion Effects","color":"dark_purple","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 14b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 15b, id: "minecraft:diamond_sword", Count: 1b, tag: {filler: 1b, Damage: 0, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Kill All Mobs","color":"dark_red","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 16b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 17b, id: "minecraft:written_book", Count: 1b, tag: {filler: 1b, title: "", author: "", display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Teleport To 0 0","color":"blue","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 18b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 19b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 20b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 21b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 22b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 23b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 24b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 25b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 26b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}], Tags: ["pndmenu", "invisible_minecart"]}
execute at @a[tag=!pnd,nbt={SelectedItem:{tag:{menu:1b}}}] run scoreboard players set @e[tag=pndmenu,distance=..6.5,limit=1,sort=nearest] page 1
#Summoning Menu if holding menu tablet and there is no menu
execute as @a[nbt={SelectedItem:{tag:{menu:1b}}}] at @s unless entity @e[tag=pndmenu,distance=..2] run summon chest_minecart ~ ~1.2 ~ {NoGravity: 1b, Motion: [0.0d, 0.0d, 0.0d], CustomDisplayTile: 1b, DisplayState: {Name: "minecraft:air"}, Silent: 1b, Invulnerable: 1b, Air: 0s, OnGround: 0b, PortalCooldown: 0, Rotation: [0.0f, 0.0f], FallDistance: 0.0f, DisplayOffset: 0, CustomName: '{"italic":false,"color":"white","text":"P.N.D Storage"}', Fire: -1s,Items: [{Slot: 0b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 2, display: {Name: '{"text":""}'}}}, {Slot: 1b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 2b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 3b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 4b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 5b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 6b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 7b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 8b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 9b, id: "minecraft:slime_block", Count: 1b, tag: {filler: 1b, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Bounce Mobs Up","color":"dark_green","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 10b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 11b, id: "minecraft:wither_skeleton_spawn_egg", Count: 1b, tag: {filler: 1b, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Summon Wither Skeleton 5 Blocks Away","color":"dark_red","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 12b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 13b, id: "minecraft:honey_bottle", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Potion Effects","color":"dark_purple","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 14b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 15b, id: "minecraft:diamond_sword", Count: 1b, tag: {filler: 1b, Damage: 0, display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Kill All Mobs","color":"dark_red","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 16b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 17b, id: "minecraft:written_book", Count: 1b, tag: {filler: 1b, title: "", author: "", display: {Lore: ['{"text":"CLICK","color":"gold","bold":true,"italic":false}'], Name: '{"text":"Teleport To 0 0","color":"blue","bold":true,"italic":false}'}, Enchantments: [{}]}}, {Slot: 18b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 19b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 20b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 21b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 22b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 23b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 24b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 25b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}, {Slot: 26b, id: "minecraft:command_block", Count: 1b, tag: {filler: 1b, CustomModelData: 1, display: {Name: '{"text":""}'}}}], Tags: ["pndmenu", "invisible_minecart"]}
#removing and adding tag
tag @a[tag=pnd] remove pnd
tag @a[nbt={SelectedItem:{tag:{menu:1b}}}] add pnd
#Menu following player
execute at @a[tag=pnd] positioned ~ ~1.2 ~ run tp @e[tag=pndmenu,distance=..6.5,limit=1,sort=nearest] ~ ~ ~
#Getting rid of unnecessary menu's
execute as @e[tag=pndmenu] at @s unless entity @a[tag=pnd,distance=..2] run tp @s ~ ~-1000000 ~


